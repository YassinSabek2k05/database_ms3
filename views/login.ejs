<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/login-form.css">
    <title>HR Management System - Login</title>
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="login-header-icon">
                    <i class="fas fa-building"></i>
                </div>
                <h1>HR System</h1>
                <p>University Management Portal</p>
            </div>

            <form id="loginForm" action="/auth/hrlogin" method="post">
                <div id="errorMessage" class="error-message"></div>

                <div class="form-group">
                    <label for="userid">
                        <i class="fas fa-id-card"></i> Employee ID
                    </label>
                    <input 
                        type="number" 
                        id="userid" 
                        name="userid" 
                        placeholder="Enter your employee ID"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i> Password
                    </label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="Enter your password"
                        required
                    >
                </div>

                <div class="form-group">
                    <label><i class="fas fa-user-tag"></i> Select Your Role</label>
                    <div class="role-group">
                        <div class="role-option">
                            <input type="radio" id="roleHR" name="role" value="HR">
                            <label for="roleHR">
                                <i class="fas fa-users"></i> HR
                            </label>
                        </div>
                        <div class="role-option">
                            <input type="radio" id="roleAdmin" name="role" value="Admin">
                            <label for="roleAdmin">
                                <i class="fas fa-shield-alt"></i> Admin
                            </label>
                        </div>
                        <div class="role-option">
                            <input type="radio" id="roleAcademic" name="role" value="Academic">
                            <label for="roleAcademic">
                                <i class="fas fa-graduation-cap"></i> Academic
                            </label>
                        </div>
                    </div>
                </div>

                <button type="submit" class="login-button">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
            </form>
        </div>
    </div>

    <script>
        const errorMsg = document.getElementById('errorMessage');
        const loginForm = document.getElementById('loginForm');
        const userIdInput = document.getElementById('userid');
        const passwordInput = document.getElementById('password');
        const roleRadios = document.querySelectorAll('input[name="role"]');

        const actionUrls = {
            'HR': '/auth/hrlogin',
            'Admin': '/auth/adminlogin',
            'Academic': '/auth/academiclogin'
        };

        // Update form action when role is selected
        roleRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.checked) {
                    loginForm.action = actionUrls[this.value];
                    errorMsg.classList.remove('show');
                    errorMsg.textContent = '';
                    console.log('Form action changed to:', loginForm.action);
                }
            });
        });

        // Validate form on submit
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Clear previous error
            errorMsg.textContent = '';
            errorMsg.classList.remove('show');

            // Validate all fields
            const userid = userIdInput.value.trim();
            const password = passwordInput.value.trim();
            const selectedRole = document.querySelector('input[name="role"]:checked');

            let errors = [];

            if (!userid) {
                errors.push('Please enter your Employee ID');
            }

            if (!password) {
                errors.push('Please enter your password');
            }

            if (!selectedRole) {
                errors.push('Please select a role');
            }

            // Display errors or submit
            if (errors.length > 0) {
                errorMsg.textContent = errors.join(' â€¢ ');
                errorMsg.classList.add('show');
            } else {
                // All validations passed, submit the form
                loginForm.submit();
            }
        });
    </script>
</body>
</html>