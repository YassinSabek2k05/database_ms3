<div class="records-container">
    <div class="records-section">
        <h3><i class="fas fa-chart-line"></i> Performance Records</h3>
        <% if (myPerformance && myPerformance.length > 0) { %>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Semester</th>
                        <th>Rating</th>
                        <th>Comments</th>
                    </tr>
                </thead>
                <tbody>
                    <% myPerformance.forEach(perf => { %>
                        <tr>
                            <td><%= perf.semester || 'N/A' %></td>
                            <td>
                                <span class="rating-badge rating-<%= perf.rating %>">
                                    <%= perf.rating %>/5
                                </span>
                            </td>
                            <td><%= perf.comments || '-' %></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <div class="info-message">
                <i class="fas fa-info-circle"></i> No performance records available.
            </div>
        <% } %>
    </div>

    <div class="records-section">
        <h3><i class="fas fa-calendar-check"></i> Attendance (Current Month)</h3>
        <% if (myAttendance && myAttendance.length > 0) { %>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Check In</th>
                        <th>Check Out</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <% myAttendance.forEach(att => { %>
                        <tr>
                            <td><%= new Date(att.date).toLocaleDateString() %></td>
                            <td><%= att.check_in_time || 'N/A' %></td>
                            <td><%= att.check_out_time || 'N/A' %></td>
                            <td>
                                <span class="status-pill <%= (att.status || '').toLowerCase() %>">
                                    <%= att.status || 'Unknown' %>
                                </span>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <div class="info-message">
                <i class="fas fa-info-circle"></i> No attendance records available for this month.
            </div>
        <% } %>
    </div>

    <div class="records-section">
        <h3><i class="fas fa-money-bill-wave"></i> Last Month Payroll</h3>
        <% if (lastMonthPayroll && lastMonthPayroll.length > 0) { %>
            <% lastMonthPayroll.forEach(payroll => { %>
                <div class="payroll-card">
                    <div class="payroll-row">
                        <span class="payroll-label">Payment Date:</span>
                        <span class="payroll-value"><%= new Date(payroll.payment_date).toLocaleDateString() %></span>
                    </div>
                    <div class="payroll-row">
                        <span class="payroll-label">Period:</span>
                        <span class="payroll-value">
                            <%= new Date(payroll.from_date).toLocaleDateString() %> - 
                            <%= new Date(payroll.to_date).toLocaleDateString() %>
                        </span>
                    </div>
                    <div class="payroll-row">
                        <span class="payroll-label">Base Salary:</span>
                        <span class="payroll-value">$<%= (payroll.final_salary_amount || 0).toLocaleString() %></span>
                    </div>
                    <% if (payroll.bonus_amount > 0) { %>
                        <div class="payroll-row bonus">
                            <span class="payroll-label">Bonus:</span>
                            <span class="payroll-value">+$<%= payroll.bonus_amount.toLocaleString() %></span>
                        </div>
                    <% } %>
                    <% if (payroll.deductions_amount > 0) { %>
                        <div class="payroll-row deduction">
                            <span class="payroll-label">Deductions:</span>
                            <span class="payroll-value">-$<%= payroll.deductions_amount.toLocaleString() %></span>
                        </div>
                    <% } %>
                    <div class="payroll-row total">
                        <span class="payroll-label">Final Amount:</span>
                        <span class="payroll-value">$<%= ((payroll.final_salary_amount || 0) + (payroll.bonus_amount || 0) - (payroll.deductions_amount || 0)).toLocaleString() %></span>
                    </div>
                    <% if (payroll.comments) { %>
                        <div class="payroll-row">
                            <span class="payroll-label">Comments:</span>
                            <span class="payroll-value"><%= payroll.comments %></span>
                        </div>
                    <% } %>
                </div>
            <% }); %>
        <% } else { %>
            <div class="info-message">
                <i class="fas fa-info-circle"></i> No payroll records available for last month.
            </div>
        <% } %>
    </div>

    <div class="records-section">
        <h3><i class="fas fa-exclamation-triangle"></i> Deductions (Current Month)</h3>
        <% if (myDeductions && myDeductions.length > 0) { %>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <% myDeductions.forEach(ded => { %>
                        <tr>
                            <td><%= new Date(ded.date).toLocaleDateString() %></td>
                            <td><%= ded.type || 'N/A' %></td>
                            <td>$<%= (ded.amount || 0).toLocaleString() %></td>
                            <td>
                                <span class="status-pill <%= (ded.status || '').toLowerCase() %>">
                                    <%= ded.status || 'Unknown' %>
                                </span>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <div class="success-message">
                <i class="fas fa-check-circle"></i> No deductions for this month.
            </div>
        <% } %>
    </div>
</div>

